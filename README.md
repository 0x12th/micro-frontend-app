# Задание 1 - разделение проекта на микрофронтенды

## Анализ и выбор инструментов

Для разделения проекта Mesto на микрофронтенды определим логические блоки, которые могут быть разделены и функционировать независимо.

### Логические микрофронтенды:
- Аутентификация и авторизация: Управление регистрацией, входом и проверкой токенов.
- Профиль пользователя: Просмотр и редактирование информации профиля.
- Галерея фотографий: Загрузка, просмотр фотографий и взаимодействие с ними (лайки).

### Обоснование разделения
- Изоляция функциональности: каждый микрофронтенд будет обрабатывать отдельную часть логики, что упрощает разработку, тестирование и развертывание.
- Параллельная разработка: разделение позволяет нескольким командам работать одновременно над разными частями.
- Гибкость и масштабируемость: новые модули могут быть добавлены без изменения существующей архитектуры.

В качестве инструмента для разбиения проекта на микрофронтенды выбран `Webpack Module Federation` благодаря следующим преимуществам:
- Все части приложения написаны на React, и благодаря шарингу модулей, общий код (например, библиотеки `React`) загружается только один раз, что снижает общий объем загружаемых данных.
- Webpack Module Federation позволяет микрофронтендам делиться модулями на уровне компонентов, утилит и стилей без необходимости их дублирования.

## Разделение проекта на микрофронтенды
Проект разделен на следующие микрофронтенды:
- Host (главная точка входа)
- Auth (авторизация и регистрация)
- Profile (профиль пользователя)
- Gallery (фотографии и связанный с ними функционал)

### Host
Host управляет интеграцией микрофронтендов и предоставляет единую точку входа для пользователей.

```
/host
  /src
    /components
      App.js                 // Основной компонент приложения
      Footer.js              // Компонент футер
      Header.js              // Компонент хедер
      ProtectedRoute.js      // Компонент с проверкой необходимости авторизации
    /styles
      ...                    // Основные стили приложения
    index.js                 // Точка входа приложения
  package.json               // Зависимости и скрипты приложения
  webpack.config.js          // Конфигурация Webpack Module Federation
```

### Auth
Управляет функциональностью авторизации и регистрации пользователей.

```
/auth
  /src
    /components
      Login.js               // Компонент входа пользователя
      Register.js            // Компонент регистрации пользователя
      InfoTooltip.js         // Информационный тултип
    /styles                 
      ...                    // Стили для авторизации и регистрации
    /utils
      auth.js                // Утилиты для авторизации и регистрации
    index.js                 // Точка входа микрофронтенда
  package.json               // Зависимости и скрипты микрофронтенда
  webpack.config.js          // Конфигурация Webpack Module Federation
```

### Profile
Управляет отображением и редактированием профиля пользователя.

```
/profile
  /src
    /components
      EditProfilePopup.js    // Компонент редактирования профиля
      EditAvatarPopup.js     // Компонент редактирования аватара
    /styles
      ...                    // Стили профиля пользователя
    /utils
      api.js                 // Утилиты для работы с API профиля
    index.js                 // Точка входа микрофронтенда
  package.json               // Зависимости и скрипты микрофронтенда
  webpack.config.js          // Конфигурация Webpack Module Federation
```

### Gallery
Управляет отображением, добавлением фотографий и взаимодействий с ними (лайки).

```
/gallery
  /src
    /components
      Card.js                // Основной компонент галереи
      AddPlacePopup.js       // Компонент добавления фотографии
      ImagePopup.js          // Просмотр фотографии
      PopupWithForm.js       // Попап с формой
    /styles
      ...                    // Стили галереи
    /utils
      api.js                 // Утилиты для работы с API галереей
    index.js                 // Точка входа микрофронтенда
  package.json               // Зависимости и скрипты микрофронтенда
  webpack.config.js          // Конфигурация Webpack Module Federation
```



# Задание 2 - декомпозиция веб-приложения
### Ссылка на диаграмму - https://drive.google.com/file/d/1MPCarp-9RXJDDTAh9q8OH5K4i-Ntf5K5/view?usp=sharing

## Описание новых компонентов

### API-шлюз
Централизованный вход для клиентов, маршрутизация запросов.


### Сервис поддержки
Обеспечивает обработку запросов пользователей и администраторов.


### Сервис управления аукционами
Обеспечивает управление всеми процессами, связанными с аукционом.

#### Сервис управления пользователями:
- Передаёт: Запросы на регистрацию и подтверждение участников аукционов.
- Получает: Данные пользователя (ID, роль, подтверждение).


### Сервис портала электронной площадки
Управление товарами, категориями и услугами.

#### Сервис управления пользователями:
- Передаёт: Запросы на получение данных о пользователе (например, список прав).
- Получает: Данные пользователя (например, для управления контентом).


### Сервис управления заказами
Создание, редактирование, удаление заказов, отслеживание их статусов.

#### Сервис обработки платежей:
- Передаёт: Данные для инициации платежей (ID пользователя, ID заказа, сумма).
- Получает: Текущие статусы платежей (например, “Подтверждён”, “Отменён”).
#### Сервис портала электронной площадки:
- Передаёт: Запросы на добавление заказанных товаров/услуг в соответствующие категории.
- Получает: Данные товаров и услуг, связанные с заказами.


### Сервис управления пользователями
Регистрация пользователя, аутентификация, управление ролями и безопасностью.


### Сервис обработки платежей
Интеграция с внешними платёжными системами, инициация, подтверждение и отмена платежей.

#### Сервис управления заказами:
- Передаёт: Статусы платежей (например, “Инициирован”, “Подтверждён”, “Отменён”).
- Получает: Данные для инициации платежей (ID заказа, сумма).
#### Внешние платёжные системы:
- Передаёт: Запросы на проведение платежей.
- Получает: Ответы о статусе платежей или их отмене.


## Описание потоков

1. Получить данные о пользователе
При создании/редактировании аукциона Сервис управления аукционами делает запрос в Сервис управления пользователями для получения роли пользователя и доступных ему прав.

2. Данные о пользователе
Сервис управления пользователями принял запрос на получение данных о пользователе, сделал запрос в БД и отправил ответ.

3.  Получить данные о пользователе
При удалении услуги или товара Сервис портала делает запрос в Сервис управления пользователями для получения роли пользователя и доступных ему прав.

4. Данные о пользователе
Сервис управления пользователями принял запрос на получение данных о пользователе, сделал запрос в БД и отправил ответ.

5. Инициировать платеж
При оформлении заказа Сервис управления заказами делает запрос в Сервис обработки платежей для оплаты заказа. Дальше выполняются потоки с инициализацией платежа с запросами во внешние платежные системы.

6. Резервирование товара
При оформлении заказа Сервис управления заказами делает запрос в Сервис портала для резервирования товара из заказа (чтобы в каталоге была актуальнная информация о количестве доступных товаров).

7. Подтверждение платежа
После проходждения оплаты Сервис обработки платежей отправляет уведомление в Сервис управления заказами (откуда была иницирована оплата).
